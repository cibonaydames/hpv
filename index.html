<!DOCTYPE html>
<!--[if lte IE 9]><html class="no-js is-ie"><![endif]-->
<!--[if gt IE 8]><!--><html class=no-js><!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">


	<title>HPV</title>
	<link rel=stylesheet href="css/main.css">
	<link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,700,300,600,800,400' rel='stylesheet' type='text/css'>
	
	<link rel=stylesheet href="css/ie.css">
	
    <script src="js/vendor/modernizr.js"></script>
		<script src="js/vendor/respond.min.js"></script>

</head>

<body>
	<div class="level level-hero hero-home has-hint">
		

<!--		<div class="hero-overlay visible-lg"></div>-->

		<div class="container full-height">
			<div class=v-align-parent>
				<div class=v-center>
					<div class="row">
						<div class="col-md-2">
						<br>
                         <br>	
                         <span style="font-family: Lato, sans-serif">
                             <h1 class="mb-10 heading">IS HPV <span>WORTH <span>THE RISK?</span></h1>
                              <span>
                           <br>
                            <div class="subheading mb-20"><B>27%</B> of women in the US have HPV, <br class=hidden-xs>of those a high percent have a strain<br class=hidden-xs> of HPV that can cause cervical cancer.    
                            </div>
						</div>
						<div class="col-md-10">
						    <div class="btn-group" data-toggle="buttons-radio">
                                <button type="button" id="zero" class="btn active switch" value="Update" onclick="updateData()">0 Partners</button>
                                <button type="button" id="one" class="btn switch">1 Partner</button>
                                <button type="button" id="two" class="btn switch">2 Partners</button>
                                <button type="button" id="three_five" class="btn switch">3-5 Partners</button>
                                <button type="button" id="six_plus" class="btn switch">6+ Partners</button>
                            </div>
                            <br><br>
							<div id="hpvchart">  </div>
							<br>
							<div class="btn-group" data-toggle="buttons-radio">
                                <button type="button" id="unvaccinated" class="btn active switch">Unvaccinated</button>
                                <button type="button" id="vaccinated" class="btn switch">Vaccinated</button>
                            </div>
                              </div>
							</div>
						</div>
					</div>
				</div>
			</div>


	
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.1.min.js"><\/script>')</script>

	<script src="js/bootstrap.min.js"></script>
	<script src="js/dropdown.js"></script>
	<script src="js/modal.js"></script>
	<script src="js/main.js"></script>
	<!-- //-end- concat_js -->
	
	<!-- D3 SCRIPTS -->
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="js/bullet.js"></script>
    <script src="js/hpv.js"></script>


	<script>
        // Size of SVG container
            var fullwidth = 850;
			var	fullheight = 360;
        
        // Margins around the graph
            var margin = {top: 5, right: 40, bottom: 20, left: 120};
            
            var width = 960 - margin.left - margin.right;
            var height = 50 - margin.top - margin.bottom;
        
            var widthScale = d3.scale.linear()
				.range([0, width]);
        
        // Space out the bars between the top margin and chart height (bottom)
			var heightScale = d3.scale.ordinal()
				.rangeRoundBands([ 0, height], 0.2);         
        
            var svg = d3.select("#hpvchart")
				.append("svg")
				//.attr("width", fullwidth)
                .attr("width", width + margin.left + margin.right)
				//.attr("height", fullheight)
                .attr("height", height + margin.top + margin.bottom)
				.append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
        
        
        d3.csv("data/hpv-data.csv", function(error, data) {

				if (error) {
					console.log("error reading file");
				}

				data.sort(function(a, b) {
					return d3.descending(+a.status, +b.status);
				});

				// in this case, i know it's out of 100 because it's percents.
				// you should calculate using d3.max for your data!
				/*widthScale.domain([0, 100]);*/
				widthScale.domain([ 0, d3.max(data, function(d) {
					return +d.average;
				}) ]);

				// js map: will make a new array out of all the d.name fields:

				heightScale.domain(data.map(function(d) { return d.status; } ));

            var rects = svg.selectAll("rect")
                    .data(data)
                    .enter()
                    .append("rect");
            
                rects
					.attr("x", 0)
					.attr("y", function(d) {
						return heightScale(d.status); // because we mapped to the names!
					})
					.attr("width", function(d) {
						return widthScale(d.average);
					})
					.attr("height", heightScale.rangeBand()) // the height is a rangeband!
					.style("fill", function(d){
						if (d.status === "Average") {
							return "#dab855"; // special case file, could have been done by a class.
						}
					})
					.append("title")
					.text(function(d) {
						return " People who are " + d.status + " have " + d.average  + " chance of contracting HPV. ";
					});
                      
                    svg.selectAll("text")
                   .attr("class", "label")
				    .data(data)
			      	.enter()
			      	.append("text")
				    .text(function(d){
					 	return d.status;
					 })          // define text string to show.
                     .attr("x", function(d) {
						return widthScale(d.average)+15;
					})
                     .attr("y", function(d) {
						return heightScale(d.status)+25; // because we mapped to the names!
					})
                     .attr("font-size","12px")
            
        });
        
        // ** Update data section (Called from the onclick)
        function updateData() {

            // Get the data again
             d3.csv("data/hpv-data.csv", function(error, data) {

				if (error) {
					console.log("error reading file");
				}

				data.sort(function(a, b) {
					return d3.descending(+a.zero, +b.zero);
				});

                // Scale the range of the data again 
                widthScale.domain([ 0, d3.max(data, function(d) {
					return +d.zero;
				}) ]);

				heightScale.domain(data.map(function(d) { 
                    return d.status; } ));
                
            // Select the section we want to apply our changes to
            var rects = svg.selectAll("rect").transition();

            // Make the changes
              /*  svg.select(".line")   // change the line
                    .duration(750)
                    .attr("d", valueline(data));
                svg.select(".x.axis") // change the x axis
                    .duration(750)
                    .call(xAxis);
                svg.select(".y.axis") // change the y axis
                    .duration(750)
                    .call(yAxis);
*/
            });
}


    </script>

</body>
</html>
